<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý sự kiện - Trang người dùng</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="user.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="#">
          <i class="fas fa-calendar-check me-2"></i>
          Quản lý Sự kiện
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a
                class="nav-link active"
                href="#"
                data-bs-toggle="tab"
                data-bs-target="#registerEvent"
              >
                <i class="fas fa-plus-circle me-1"></i> Đăng ký sự kiện
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="tab"
                data-bs-target="#viewEvents"
              >
                <i class="fas fa-list me-1"></i> Sự kiện đã đăng ký
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="tab"
                data-bs-target="#payment"
              >
                <i class="fas fa-credit-card me-1"></i> Thanh toán
              </a>
            </li>
          </ul>
          <div class="d-flex align-items-center">
            <span class="user-welcome">
              <i class="fas fa-user-circle me-1"></i> Xin chào, Nguyễn Văn A
            </span>
            <a href="phanquyen.html" class="btn btn-light btn-sm">
              <i class="fas fa-sign-out-alt me-1"></i> Đăng xuất
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main content -->
    <div class="main-container">
      <div class="tab-content">
        <!-- Đăng ký sự kiện -->
        <div class="tab-pane fade show active" id="registerEvent">
          <div class="row">
            <div class="col-md-12 mb-4">
              <!-- Thông báo đăng ký thành công -->
              <div
                class="alert alert-success alert-dismissible fade"
                id="successAlert"
                role="alert"
              >
                <i class="fas fa-check-circle me-2"></i> Đăng ký sự kiện thành
                công! Bạn sẽ được chuyển đến trang thanh toán.
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                  aria-label="Close"
                ></button>
              </div>

              <div class="card">
                <div
                  class="card-header d-flex justify-content-between align-items-center"
                >
                  <h5 class="mb-0">
                    <i class="fas fa-plus-circle me-2"></i>Đăng ký sự kiện mới
                  </h5>
                </div>
                <div class="card-body">
                  <form id="eventRegistrationForm">
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label class="form-label">Tên người đăng ký</label>
                        <input type="text" class="form-control" required />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Số điện thoại</label>
                        <input
                          type="tel"
                          class="form-control"
                          pattern="[0-9]{10}"
                          required
                        />
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label class="form-label">Nơi tổ chức</label>
                        <input type="text" class="form-control" required />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Tên sự kiện</label>
                        <input type="text" class="form-control" required />
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label class="form-label">Thời gian bắt đầu</label>
                        <input
                          type="datetime-local"
                          class="form-control"
                          required
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Thời gian kết thúc</label>
                        <input
                          type="datetime-local"
                          class="form-control"
                          required
                        />
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label class="form-label">Loại sự kiện</label>
                        <select class="form-select" id="eventType" required>
                          <option value="">-- Chọn loại sự kiện --</option>
                          <option value="hoinghi" data-price="15000000">
                            Hội nghị
                          </option>
                          <option value="tieccuoi" data-price="45000000">
                            Tiệc cưới
                          </option>
                          <option value="sinhnhat" data-price="5000000">
                            Sinh nhật
                          </option>
                          <option value="workshop" data-price="8500000">
                            Workshop
                          </option>
                          <option value="hoithao" data-price="12000000">
                            Hội thảo
                          </option>
                          <option value="teambuilding" data-price="20000000">
                            Team Building
                          </option>
                          <option value="ramatsp" data-price="30000000">
                            Ra mắt sản phẩm
                          </option>
                          <option value="khac" data-price="10000000">
                            Khác
                          </option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label class="form-label"
                          >Số lượng người tham dự (dự kiến)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="attendees"
                          min="1"
                          required
                        />
                      </div>
                    </div>

                    <!-- Hiển thị giá -->
                    <div
                      class="mb-3"
                      id="priceInfoContainer"
                      style="display: none"
                    >
                      <div class="alert alert-info">
                        <div
                          class="d-flex justify-content-between align-items-center"
                        >
                          <div>
                            <h6 class="mb-0">
                              <i class="fas fa-info-circle me-2"></i>Chi phí dự
                              kiến:
                            </h6>
                            <p class="mb-0" id="priceDetails">
                              Giá cơ bản: <span id="basePrice">0</span> VNĐ
                            </p>
                          </div>
                          <div>
                            <h5 class="mb-0 text-primary" id="totalPrice">
                              0 VNĐ
                            </h5>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">Mô tả chi tiết sự kiện</label>
                      <textarea class="form-control" rows="3"></textarea>
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                      <button type="reset" class="btn btn-light">
                        <i class="fas fa-redo me-1"></i> Làm mới
                      </button>
                      <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane me-1"></i> Đăng ký sự kiện
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Xem sự kiện đã đăng ký -->
        <div class="tab-pane fade" id="viewEvents">
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5 class="mb-0">
                <i class="fas fa-list me-2"></i>Danh sách sự kiện đã đăng ký
              </h5>
              <div>
                <select class="form-select form-select-sm">
                  <option value="all">Tất cả sự kiện</option>
                  <option value="pending">Chờ xác nhận</option>
                  <option value="confirmed">Đã xác nhận</option>
                  <option value="completed">Đã hoàn thành</option>
                  <option value="canceled">Đã hủy</option>
                </select>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Mã sự kiện</th>
                      <th>Tên sự kiện</th>
                      <th>Loại</th>
                      <th>Thời gian</th>
                      <th>Địa điểm</th>
                      <th>Giá</th>
                      <th>Trạng thái</th>
                      <th>Thao tác</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>SK001</td>
                      <td>Hội nghị khoa học</td>
                      <td>Hội nghị</td>
                      <td>15/04/2025 08:00 - 17:00</td>
                      <td>Trung tâm Hội nghị Quốc gia</td>
                      <td>15,000,000 VNĐ</td>
                      <td>
                        <span class="event-status status-confirmed"
                          >Đã xác nhận</span
                        >
                      </td>
                      <td>
                        <button
                          class="btn btn-sm btn-primary"
                          data-bs-toggle="modal"
                          data-bs-target="#eventDetailModal"
                        >
                          <i class="fas fa-eye"></i>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>SK002</td>
                      <td>Tiệc cưới Nguyễn Văn A</td>
                      <td>Tiệc cưới</td>
                      <td>20/05/2025 18:00 - 22:00</td>
                      <td>Khách sạn Metropole</td>
                      <td>45,000,000 VNĐ</td>
                      <td>
                        <span class="event-status status-pending"
                          >Chờ xác nhận</span
                        >
                      </td>
                      <td>
                        <button
                          class="btn btn-sm btn-primary"
                          data-bs-toggle="modal"
                          data-bs-target="#eventDetailModal"
                        >
                          <i class="fas fa-eye"></i>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>SK003</td>
                      <td>Workshop Kỹ năng giao tiếp</td>
                      <td>Workshop</td>
                      <td>10/04/2025 13:00 - 17:00</td>
                      <td>Trung tâm đào tạo XYZ</td>
                      <td>8,500,000 VNĐ</td>
                      <td>
                        <span class="event-status status-completed"
                          >Đã hoàn thành</span
                        >
                      </td>
                      <td>
                        <button
                          class="btn btn-sm btn-primary"
                          data-bs-toggle="modal"
                          data-bs-target="#eventDetailModal"
                        >
                          <i class="fas fa-eye"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Modal chi tiết sự kiện -->
          <div class="modal fade" id="eventDetailModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div
                  class="modal-header"
                  style="background: var(--bg-gradient); color: white"
                >
                  <h5 class="modal-title">Chi tiết sự kiện</h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-6">
                      <h6>Thông tin chung</h6>
                      <p><strong>Mã sự kiện:</strong> SK001</p>
                      <p><strong>Tên sự kiện:</strong> Hội nghị khoa học</p>
                      <p><strong>Loại sự kiện:</strong> Hội nghị</p>
                      <p><strong>Người đăng ký:</strong> Nguyễn Văn A</p>
                      <p><strong>Số điện thoại:</strong> 0912345678</p>
                      <p><strong>Số người tham dự:</strong> 150</p>
                    </div>
                    <div class="col-md-6">
                      <h6>Thời gian và địa điểm</h6>
                      <p>
                        <strong>Thời gian bắt đầu:</strong> 15/04/2025 08:00
                      </p>
                      <p>
                        <strong>Thời gian kết thúc:</strong> 15/04/2025 17:00
                      </p>
                      <p>
                        <strong>Địa điểm:</strong> Trung tâm Hội nghị Quốc gia
                      </p>
                      <p>
                        <strong>Trạng thái:</strong>
                        <span class="event-status status-confirmed"
                          >Đã xác nhận</span
                        >
                      </p>
                      <p><strong>Giá tiền:</strong> 15,000,000 VNĐ</p>
                      <p><strong>Đã thanh toán:</strong> 7,500,000 VNĐ (50%)</p>
                    </div>
                  </div>
                  <hr />
                  <div class="row">
                    <div class="col-12">
                      <h6>Mô tả chi tiết</h6>
                      <p>
                        Hội nghị khoa học về công nghệ thông tin và trí tuệ nhân
                        tạo, với sự tham gia của các chuyên gia hàng đầu trong
                        lĩnh vực.
                      </p>
                      <h6>Lịch sử cập nhật</h6>
                      <ul class="list-group">
                        <li class="list-group-item">
                          <small class="text-muted">05/04/2025 10:23</small> -
                          Đã đăng ký sự kiện
                        </li>
                        <li class="list-group-item">
                          <small class="text-muted">05/04/2025 11:45</small> -
                          Đã thanh toán 50% đặt cọc
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Thanh toán -->
        <div class="tab-pane fade" id="payment">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-credit-card me-2"></i>Thanh toán sự kiện
              </h5>
            </div>
            <div class="card-body">
              <div class="alert alert-info mb-4">
                <h6>
                  <i class="fas fa-info-circle me-2"></i>Thông tin sự kiện
                </h6>
                <div class="row">
                  <div class="col-md-6">
                    <p class="mb-1">
                      <strong>Mã sự kiện:</strong>
                      <span id="paymentEventId">SK002</span>
                    </p>
                    <p class="mb-1">
                      <strong>Tên sự kiện:</strong>
                      <span id="paymentEventName">Tiệc cưới Nguyễn Văn A</span>
                    </p>
                    <p class="mb-1">
                      <strong>Thời gian:</strong>
                      <span id="paymentEventTime"
                        >20/05/2025 18:00 - 22:00</span
                      >
                    </p>
                  </div>
                  <div class="col-md-6">
                    <p class="mb-1">
                      <strong>Tổng số tiền:</strong>
                      <span id="paymentTotalAmount">45,000,000 VNĐ</span>
                    </p>
                    <p class="mb-1">
                      <strong>Số tiền cần thanh toán (đặt cọc 50%):</strong>
                      <span id="paymentAmount">22,500,000 VNĐ</span>
                    </p>
                    <p class="mb-1">
                      <strong>Trạng thái:</strong>
                      <span class="event-status status-pending"
                        >Chờ thanh toán</span
                      >
                    </p>
                  </div>
                </div>
              </div>

              <h6 class="mb-3">Chọn phương thức thanh toán</h6>

              <div class="payment-methods">
                <!-- Thanh toán tiền mặt -->
                <div class="payment-option" id="cashPayment">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="cashMethod"
                      checked
                    />
                    <label class="form-check-label" for="cashMethod">
                      <i class="fas fa-money-bill-wave me-2"></i>Thanh toán tiền
                      mặt
                    </label>
                  </div>
                  <div class="payment-details mt-3">
                    <p>
                      Vui lòng đến văn phòng của chúng tôi để thanh toán tiền
                      mặt:
                    </p>
                    <ul>
                      <li>Địa chỉ: Số 123, Đường Lê Lợi, Quận 1, TP.HCM</li>
                      <li>Thời gian làm việc: 8:00 - 17:00 (Thứ 2 - Thứ 6)</li>
                      <li>Điện thoại liên hệ: 028.1234.5678</li>
                    </ul>
                  </div>
                </div>

                <!-- Thanh toán chuyển khoản -->
                <div class="payment-option mt-3" id="bankTransfer">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="bankMethod"
                    />
                    <label class="form-check-label" for="bankMethod">
                      <i class="fas fa-university me-2"></i>Chuyển khoản ngân
                      hàng
                    </label>
                  </div>
                  <div class="payment-details mt-3" style="display: none">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="card mb-3">
                          <div class="card-body">
                            <h6 class="card-title">Thông tin chuyển khoản</h6>
                            <p class="mb-1">
                              <strong>Ngân hàng:</strong> Vietcombank
                            </p>
                            <p class="mb-1">
                              <strong>Số tài khoản:</strong> 1234567890
                            </p>
                            <p class="mb-1">
                              <strong>Chủ tài khoản:</strong> Công ty Quản lý Sự
                              kiện XYZ
                            </p>
                            <p class="mb-1">
                              <strong>Nội dung CK:</strong> SK002_NguyenVanA
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="card">
                          <div class="card-body text-center">
                            <h6 class="card-title">Quét mã QR để thanh toán</h6>
                            <img
                              src="/api/placeholder/200/200"
                              alt="QR Code"
                              class="img-fluid qr-code"
                            />
                            <p class="mt-2 small text-muted">
                              Sử dụng ứng dụng ngân hàng để quét mã QR
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="mt-4">
                  <hr />
                  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button
                      type="button"
                      class="btn btn-light"
                      id="cancelPayment"
                    >
                      <i class="fas fa-times me-1"></i> Hủy bỏ
                    </button>
                    <button
                      type="button"
                      class="btn btn-primary"
                      id="confirmPayment"
                    >
                      <i class="fas fa-check me-1"></i> Xác nhận thanh toán
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal xác nhận thanh toán thành công -->
    <div class="modal fade" id="paymentSuccessModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">
              <i class="fas fa-check-circle me-2"></i>Thanh toán thành công
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body text-center">
            <div class="my-4">
              <i
                class="fas fa-check-circle text-success"
                style="font-size: 80px"
              ></i>
              <h4 class="mt-3">Thanh toán đã được xác nhận!</h4>
              <p>Mã thanh toán: <strong>#PAY12345</strong></p>
              <p>Cảm ơn bạn đã sử dụng dịch vụ của chúng tôi</p>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // JavaScript để xử lý các tính năng
      document.addEventListener("DOMContentLoaded", function () {
        // 1. Xử lý hiển thị giá khi chọn loại sự kiện
        const eventTypeSelect = document.getElementById("eventType");
        const priceInfoContainer =
          document.getElementById("priceInfoContainer");
        const basePriceElement = document.getElementById("basePrice");
        const totalPriceElement = document.getElementById("totalPrice");
        const attendeesInput = document.getElementById("attendees");

        // Hàm định dạng số tiền
        function formatPrice(price) {
          return new Intl.NumberFormat("vi-VN").format(price);
        }

        // Cập nhật giá khi chọn loại sự kiện
        function updatePrice() {
          const selectedOption =
            eventTypeSelect.options[eventTypeSelect.selectedIndex];
          const basePrice = selectedOption.dataset.price
            ? parseInt(selectedOption.dataset.price)
            : 0;
          const attendees = parseInt(attendeesInput.value) || 0;

          if (basePrice > 0) {
            // Hiển thị thông tin giá
            priceInfoContainer.style.display = "block";
            basePriceElement.textContent = formatPrice(basePrice);

            // Tính tổng giá (đơn giản hóa, có thể thêm logic phức tạp hơn)
            const totalPrice = basePrice;
            totalPriceElement.textContent = formatPrice(totalPrice) + " VNĐ";
          } else {
            priceInfoContainer.style.display = "none";
          }
        }

        // Thêm event listeners
        eventTypeSelect.addEventListener("change", updatePrice);
        attendeesInput.addEventListener("input", updatePrice);

        // 2. Xử lý đăng ký sự kiện và chuyển đến trang thanh toán
        const eventForm = document.getElementById("eventRegistrationForm");
        const successAlert = document.getElementById("successAlert");

        eventForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Hiển thị thông báo thành công
          successAlert.classList.add("show");

          // Sau 2 giây chuyển sang tab thanh toán
          setTimeout(function () {
            // Cập nhật thông tin thanh toán
            document.getElementById("paymentEventName").textContent =
              "Sự kiện mới đăng ký";
            document.getElementById("paymentTotalAmount").textContent =
              totalPriceElement.textContent;
            document.getElementById("paymentAmount").textContent =
              formatPrice(
                parseInt(totalPriceElement.textContent.replace(/[^\d]/g, "")) /
                  2
              ) + " VNĐ";

            // Chuyển sang tab thanh toán
            document.querySelector('a[data-bs-target="#payment"]').click();
          }, 2000);
        });

        // 3. Xử lý phương thức thanh toán
        const cashMethod = document.getElementById("cashMethod");
        const bankMethod = document.getElementById("bankMethod");
        const cashDetails = document.querySelector(
          "#cashPayment .payment-details"
        );
        const bankDetails = document.querySelector(
          "#bankTransfer .payment-details"
        );

        cashMethod.addEventListener("change", function () {
          if (this.checked) {
            cashDetails.style.display = "block";
            bankDetails.style.display = "none";
          }
        });

        bankMethod.addEventListener("change", function () {
          if (this.checked) {
            bankDetails.style.display = "block";
            cashDetails.style.display = "block";
          }
        });

        // 4. Xử lý xác nhận thanh toán
        const confirmPaymentBtn = document.getElementById("confirmPayment");

        confirmPaymentBtn.addEventListener("click", function () {
          // Hiển thị modal thành công
          const paymentSuccessModal = new bootstrap.Modal(
            document.getElementById("paymentSuccessModal")
          );
          paymentSuccessModal.show();
        });
      });
    </script>
  </body>
</html>
